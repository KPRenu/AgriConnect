<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgriConnect - Messages</title>
    <link rel="stylesheet" href="home.css"> <!-- Reusing home.css for navbar styles -->
    <link rel="stylesheet" href="message.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    
    <nav class="navbar">
        <div class="logo">
            <img src="assets/logo.svg" alt="Logo">
            <span>AgriConnect</span>
        </div>
        <div class="nav-links">
            <a href="home.html">Home</a>
            <a href="home.html#services">Services</a>
            <a href="home.html#about">About Us</a>
            <a href="message.html" class="active"><i class="fas fa-comments"></i> Messages</a>
        </div>
        <div class="auth-buttons">
            <button class="login-btn" id="nav-login-btn" onclick="window.location.href='login.html'">Login</button>
            <!-- Profile Dropdown (Initially hidden by JS, shown when logged in) -->
            <div class="profile-dropdown" id="nav-profile-dropdown">
                <div class="profile-trigger">
                    <img src="assets/default-avatar.svg" alt="Profile" class="profile-image" id="nav-profile-image">
                    <span class="profile-name" id="nav-profile-name">User</span>
                </div>
    
                <div class="dropdown-content">
                        <a href="profile.html" class="dropdown-item">
                            <i class="fas fa-user"></i>
                            My Profile
                        </a>
                        <a href="message.html" class="dropdown-item" id="notification-button">
                            <i class="fas fa-bell"></i>
                            Notifications <span class="notification-count" style="display:none;">0</span>
                        </a>
                    <a href="#" class="dropdown-item" id="nav-logout-btn">
                        <i class="fas fa-sign-out-alt"></i>
                        Logout
                    </a>
                </div>
            </div>
        </div>
        <div class="hamburger">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </nav>

    <div class="message-container">
        <div class="message-sidebar">
            <div class="sidebar-header">
                <input type="text" id="userSearch" placeholder="Search users...">
                <button id="searchButton"><i class="fas fa-search"></i></button>
            </div>
            <div class="section-tabs">
                <button class="tab-button" data-section="allusers">All Users</button>
                <button class="tab-button" data-section="labor">Labor</button>
                <button class="tab-button" data-section="products">Products</button>
            </div>
            <div id="userList" class="user-list">
                <!-- User list will be populated here by JS -->
            </div>
        </div>
        <div class="message-main">
            <div class="chat-header">
                <span id="chattingWith">Select a user to chat</span>
            </div>
            <div id="messageArea" class="message-area">
                <!-- Messages will appear here -->
            </div>
            <div class="message-input">
                <textarea id="messageText" placeholder="Type your message..."></textarea>
                <button id="sendMessageButton"><i class="fas fa-paper-plane"></i> Send</button>
            </div>
        </div>
    </div>

    <!-- Notification Panel -->
    <div id="notification-panel" class="notification-panel">
        <div class="notification-panel-header">
            <h4>Notifications</h4>
            <button id="close-notification-panel">&times;</button>
        </div>
        <div id="notification-list" class="notification-list">
            <!-- Notifications will be populated here -->
            <p>No new notifications.</p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="auth.js"></script>
    <script src="message.js"></script>
</body>
</html>
